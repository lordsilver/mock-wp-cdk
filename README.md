
# mock-wp-cdk

Mock project that deploys WordPress on AWS using CDK.

## Prerequisites

This project assumes that you own an AWS account and that you created a public hosted zone in Amazon Route 53. This is needed in order to set up a domain for WordPress.

## Installation

Install Poetry:

```
$ pip install poetry
```

Install the following Poetry plugin:

```
$ poetry self add poetry-dotenv-plugin
```

Create the virtualenv and install all the dependencies:

```
% poetry install
```

## Configuration

In order to use CDK, you need to set some environment variables. These environment variables are provided in the `.env.example` file, which needs to be renamed to `.env` before you make any changes.

AWS environment variables are needed to give access to your AWS account:

```
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
```

CDK environment variables tell CDK in what AWS account and region to deploy WordPress:
```
CDK_ACCOUNT=
CDK_REGION=
```
WP environment variables specify the domain name and container image for WordPress:
```
WP_DOMAIN=example.com
WP_CONTAINER_IMAGE=wordpress:5.8-apache
```

## Deployment

Synthesize the CloudFormation template and deploy it:
```
$ poetry run cdk deploy
```

## Architecture Diagram
This is the infrastructure deployed by the CloudFormation template generated by CDK.

![mock-wp-arch](./mock-wp-arch.svg)